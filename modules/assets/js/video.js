!function(t){var o={};function a(e){if(o[e])return o[e].exports;var i=o[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=o,a.d=function(e,i,t){a.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:t})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(i,e){if(1&e&&(i=a(i)),8&e)return i;if(4&e&&"object"==typeof i&&i&&i.__esModule)return i;var t=Object.create(null);if(a.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:i}),2&e&&"string"!=typeof i)for(var o in i)a.d(t,o,function(e){return i[e]}.bind(null,o));return t},a.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(i,"a",i),i},a.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},a.p="",a(a.s=10)}({10:function(e,i,t){"use strict";function a(e,i){for(var t=0;t<i.length;t++){var o=i[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.r(i);var n=function(){function i(e){!function(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this,i),this.query=AMP.queryHashMap(),this.isSamsungBrowser=-1<AMP.UA.indexOf("SamsungBrowser"),this.$video=e,this.video=e[0],this.$loading=$("#videoLoading"),this.videoLoadedDef,this.balloonTime,this.balloon2Time,this.buttonTime,this.fadeOutTime,this.balloonDef,this.balloon2Def,this.buttonDef,this.fadeOutDef,this.endDef,this.isBalloon=!1,this.isBalloon2=!1,this.isButton=!1,this.isFadeOut=!1,this.isEnded=!1,this.isPlaying=!1,this.isPause=!1,this.currentTime=0,this.isDuration=!0}var e,t,o;return e=i,(t=[{key:"_standby",value:function(){var e=this;e.video.play(),e.video.pause(),0!==e.video.currentTime&&(e.video.currentTime=0)}},{key:"_load",value:function(e){var i=this;return i.videoLoadedDef=$.Deferred(),i.loaded=!1,i.video.src="../assets/mp4/"+e+".mp4",i.video.load(),i.$video.off("error").one("error",function(){alert("動画の読み込みに失敗しました。\nページをリロードします。"),location.reload(!0)}),i.isSamsungBrowser&&(i.isDuration=!1,i.$video.off("durationchange").on("durationchange",function(e){0<i.$video[0].duration&&0==i.$video[0].currentTime&&(i.isDuration=!0,i.$video[0].play())})),i.$video.off("loadedmetadata").one("loadedmetadata",function(){i.isPlaying=!1}),i.$video.off("canplay").one("canplay",function(e){i.isPlaying=!1,i.videoLoadedDef.resolve(e)}),i.$video.off("canplaythrough").one("canplaythrough",function(e){i.isPlaying=!1,i.videoLoadedDef.resolve(e)}),i.$video.off("waiting").on("waiting",function(){i.$loading.addClass("active"),i.isPlaying=!1}),i.$video.off("playing").on("playing",function(){i.isPlaying=!0,i.$loading.removeClass("active")}),i.$video.off("play").on("play",function(){i.isPlaying=!0,i.$loading.removeClass("active")}),i.$video.off("ended").on("ended",function(){i.isPlaying=!1,i.$loading.removeClass("active")}),i.$video.off("pause").on("pause",function(){i.isPlaying=!1}),$.when(i.videoLoadedDef.promise()).done(function(e){i.loaded=!0,i.videoLoadedDef.resolve()}).fail(function(e){i.videoLoadedDef.reject(),confirm("ファイルの読み込みに失敗しました。リロードしますか?")&&location.reload()})}},{key:"_play",value:function(e){var i=this;return i.isEnded=!1,i.isBalloon=!1,i.isBalloon2=!1,i.isButton=!1,i.isFadeOut=!1,delete i.balloonTime,delete i.balloon2Time,delete i.buttonTime,delete i.fadeOutTime,delete i.balloonDef,delete i.balloon2Def,delete i.buttonDef,delete i.fadeOutDef,delete i.endDef,i.balloonDef=new $.Deferred,i.balloon2Def=new $.Deferred,i.buttonDef=new $.Deferred,i.fadeOutDef=new $.Deferred,i.endDef=new $.Deferred,void 0===i.balloonTime&&(i.balloonTime=e.balloonTime,i.balloon2Time=e.balloon2Time,i.buttonTime=e.buttonTime,i.fadeOutTime=e.fadeOutTime),void 0===i.balloon2Time&&(i.balloon2Time=i.balloonTime),i.video.play(),i._update(),i.balloonDef.promise(),i.balloon2Def.promise(),i.buttonDef.promise(),i.fadeOutDef.promise(),i.endDef.promise(),{balloon:i.balloonDef,balloon2:i.balloon2Def,button:i.buttonDef,fadeOut:i.fadeOutDef,end:i.endDef}}},{key:"_update",value:function(){var e=this;if(e.isDuration){if(!1===e.isBalloon&&e.$video[0].currentTime>=e.$video[0].duration-e.balloonTime)e.isBalloon=!0,e.balloonDef.resolve();else if(!1===e.isBalloon2&&e.$video[0].currentTime>=e.$video[0].duration-e.balloon2Time)e.isBalloon2=!0,e.balloon2Def.resolve();else if(!1===e.isButton&&e.$video[0].currentTime>=e.$video[0].duration-e.buttonTime)e.isButton=!0,e.buttonDef.resolve();else if(!1===e.isFadeOut&&e.$video[0].currentTime>=e.$video[0].duration-e.fadeOutTime)e.isFadeOut=!0,e.fadeOutDef.resolve();else if(e.$video[0].currentTime>=e.$video[0].duration)return e.endDef.resolve(),void(e.isEnded=!0);e.currentTime=e.$video[0].currentTime}AMP.requestAnimationFrame(e._update.bind(e))}},{key:"_pause",value:function(e,i){var t=this,o=$.Deferred(),a=t.video;return void 0===e&&(e=0),setTimeout(function(){a.pause(),1==i&&(t.isPause=!0),o.resolve()},e),o.promise()}},{key:"_resume",value:function(e,i){var t=this,o=$.Deferred(),a=t.video;return void 0===e&&(e=0),setTimeout(function(){a.play(),0==i&&(t.isPause=!1),o.resolve()},e),o.promise()}},{key:"_playLoopVideo",value:function(){this.video.play()}},{key:"_stopLoop",value:function(e){var i=$.Deferred(),t=this.video;return void 0===e&&(e=0),setTimeout(function(){t.pause(),t.currentTime=0,i.resolve()},e),i.promise()}},{key:"_stop",value:function(e){var i=$.Deferred(),t=this.video;return void 0===e&&(e=0),setTimeout(function(){t.pause(),t.currentTime=0,i.resolve()},e),i.promise()}}])&&a(e.prototype,t),o&&a(e,o),i}();function r(e,i){for(var t=0;t<i.length;t++){var o=i[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var u=function(){function e(){!function(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this,e),this.videoDataJson=[{id:"1",src:"01",totalTime:0,balloonTime:1,buttonTime:2,fadeOutTime:3},{id:"2",src:"02",totalTime:0,balloonTime:1,buttonTime:2,fadeOutTime:3},{id:"3",src:"03",totalTime:0,balloonTime:1,buttonTime:2,fadeOutTime:3},{id:"4",src:"04",totalTime:0,balloonTime:1,buttonTime:2,fadeOutTime:3}]}var i,t,o;return i=e,(t=[{key:"get",value:function(e){return this._videoDataGet(e)}},{key:"_videoDataGet",value:function(e){var i=null;for(var t in this.videoDataJson)if(this.videoDataJson[t].id==e){i=this.videoDataJson[t];break}return null===i&&(alert("動画の読み込みに失敗しました。\nページをリロードします。"),location.reload(!0)),i}}])&&r(i.prototype,t),o&&r(i,o),e}();function s(e,i){for(var t=0;t<i.length;t++){var o=i[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var o=function(){function e(){!function(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this,e),this.$loading=$("#loading"),this.$video=$("#video"),this.$standby=$("#standby"),this.$play=$("#play"),this.$pause=$("#pause"),this.$next=$("#next"),this.$mainVideos=$("#mainVideos"),this.src=null,this.queueData=null,this.queueDataSub=null,this.stream=null,this.videoID=1,this.videoLoadedDef=null,this.videoPlayingDef=null,this.isLoaded=!1,this.isCurrent=!0,this.isCrossfade=!1,this.isPause=!1,this.isPauseVideo=null,this.isBrowserFocus=!1,this.isFirst=!0,this.duration=800,this.videoCurrent=new n($("#videoCurrent")),this.videoNext=new n($("#videoNext")),this.videoData=new u}var i,t,o;return i=e,(t=[{key:"setup",value:function(){var i=this;i.$play.on("click",function(e){if(e.preventDefault(),!$(this).hasClass("disabled"))return $(this).addClass("disabled"),i.$pause.removeClass("disabled"),i.$next.removeClass("disabled"),i.isPause?!(i.isPause=!1)===i.isCurrent?i.videoCurrent._resume():i.videoNext._resume():(i.videoCurrent._standby(),i.videoNext._standby(),i._videoPlay()),!1}),i.$next.on("click",function(e){if(e.preventDefault(),!$(this).hasClass("disabled"))return $(this).addClass("disabled"),$.sequence(function(){return i.videoID++,4<i.videoID&&(i.videoID=1),i.isCurrent,i.setPlay(i.videoID),i.$play.addClass("disabled"),i.$pause.removeClass("disabled"),i.videoPlayingDef},function(){return i.$next.removeClass("disabled")}),!1}),i.$pause.on("click",function(e){if(e.preventDefault(),!$(this).hasClass("disabled"))return(i.isPause=!0)===i.isCurrent?i.videoCurrent._pause():i.videoNext._pause(),$(this).addClass("disabled"),i.$play.removeClass("disabled"),i.$next.removeClass("disabled"),!1})}},{key:"_resetQueueData",value:function(){var e=$.Deferred(),i=this;if(null!==i.queueData){for(var t in i.queueData)"resolved"!==i.queueData[t].state()&&i.queueData[t].resolve();return i.queueData=null,e.resolve(),e.promise()}}},{key:"_resetQueueDataSub",value:function(){var e=$.Deferred(),i=this;if(null!==i.queueDataSub){for(var t in i.queueDataSub)"resolved"!==i.queueDataSub[t].state()&&i.queueDataSub[t].resolve();return i.queueDataSub=null,e.resolve(),e.promise()}}},{key:"_resetStream",value:function(){var e=$.Deferred();if(null!==this.stream)return"resolved"!==this.stream.state()&&this.stream.resolve(),this.stream=null,e.resolve(),e.promise()}},{key:"_videoLoad",value:function(e,i){var t=this;"preload"===i?!0===t.isCurrent?t.videoLoadedDef=t.videoCurrent._load(e.src):t.videoLoadedDef=t.videoNext._load(e.src):!0===t.isCurrent?t.videoLoadedDef=t.videoNext._load(e.src):t.videoLoadedDef=t.videoCurrent._load(e.src)}},{key:"setPlay",value:function(e){var i,t=this;t.videoPlayingDef=$.Deferred(),$.sequence(function(){i=t.videoData.get(e),t._videoLoad(i)},function(){t.isPauseVideo=null,t._resetStream(),t._resetQueueData(),t._resetQueueDataSub(),t.stream=$.stream(function(){return t.videoLoadedDef},function(){return t.videoLoadedDef=null,t._switchVideoPlay(i)},function(){return t.videoPlayingDef.resolve(),t.videoPlayingDef=null,t.queueData.balloon},function(){return t.queueData.button},function(){return t.queueData.fadeOut},function(){i.nextLoop&&t._loopVideoPlay()},function(){return t.queueData.end},function(){app.main.$play.removeClass("disabled"),app.main.$pause.addClass("disabled"),t.queueData=null},function(){})})}},{key:"_videoSet",value:function(){var e=$.Deferred(),i=this;return $.sequence(function(){var e=i.videoData.get(1);return i.videoCurrent._load(e.src)},function(){var e=i.videoData.get(2);return i.videoNext._load(e.src)},function(){e.resolve()}),e.promise()}},{key:"_videoPlay",value:function(){var e=this,i=e.videoData.get(1);e.stream=$.stream(function(){return e._resetQueueData()},function(){return e._resetQueueDataSub()},function(){return e.queueData=e.videoCurrent._play(i),e.queueData.balloon},function(){return e.queueData.button},function(){return e.queueData.fadeOut},function(){return e.queueData.end},function(){app.main.$play.removeClass("disabled"),app.main.$pause.addClass("disabled"),e.queueData=null})}},{key:"_switchVideoPlay",value:function(e,i){var t,o,a=this;return a.videoID=e.id,o=!0===a.isCurrent?(t=a.videoCurrent,a.videoNext):(t=a.videoNext,a.videoCurrent),$.sequence(function(){return!0===a.isCrossfade?(o.$video.addClass("block"),"sub"===i?a.queueDataSub=o._play(e):a.queueData=o._play(e)):t.$video.addClass("hide").delay(a.duration)},function(){if(!0===a.isCrossfade)return t.$video.addClass("hide").delay(a.duration)},function(){if(t.$video.removeClass("show").removeClass("hide").addClass("standby"),o.$video.removeClass("standby").addClass("show"),!1===a.isCrossfade)return"sub"===i?a.queueDataSub=o._play(e):a.queueData=o._play(e)},function(){!0===a.isCrossfade&&o.$video.removeClass("block"),a.switchFlag(e.isCrossfade)})}},{key:"switchFlag",value:function(e){var i=this;!0===i.isCurrent?i.isCurrent=!1:i.isCurrent=!0,i.isCrossfade=!0===e}}])&&s(i.prototype,t),o&&s(i,o),e}();$(function(e){var i=new o;e.sequence(function(){return i.setup(),i.isLoaded=!0,i._videoSet()},function(){i.$loading.removeClass("active"),i.$play.removeClass("disabled")})})}});